dependencies {
    project(":frontend")
}

task copyPublicContent(type: Copy) {
    from project(":frontend").buildDir
    into "resources/web" 
}

task build(type: Exec) {
    dependsOn copyPublicContent
    inputs.file("cloudbuild.yaml")
    inputs.file("nginx.conf")
    inputs.file("Dockerfile")
    inputs.dir("resources")
    workingDir project.projectDir
    commandLine "gcloud", "builds", "submit", "--config", "cloudbuild.yaml", "."
}

